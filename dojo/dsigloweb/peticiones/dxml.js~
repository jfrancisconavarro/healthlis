dojo.provide("dsiglo.peticiones.dxml");

dojo.declare(
"dxml",null,
{
	vgenerali: function( )
	{
		var soapMessage;
		soapMessage = '<?xml version="1.0" encoding="UTF-8"?>';
		soapMessage+='OAP-ENV:Envelope ';
		soapMessage+='SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"';
		soapMessage+='<SOAP-ENV:Envelope ';
		soapMessage+='xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" ';
		soapMessage+='xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ';
		soapMessage+='xmlns:xsd="http://www.w3.org/2001/XMLSchema">';
		soapMessage+='<SOAP-ENV:Body>';
		soapMessage+='<ns1:consultaPorNif ';
		soapMessage+='xmlns:ns1="http://tempuri.org/es.generali.arq.test.ClienteHandler" ';
		soapMessage+='SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">';
		soapMessage+='<req xmlns:ns2="http://test.arq.generali.es/" xsi:type="ns2:ClienteRequest">';
		soapMessage+='<nif xsi:type="xsd:string">37364365Y</nif>';
		soapMessage+='</req>';
		soapMessage+='</ns1:consultaPorNif>';
		soapMessage+='</SOAP-ENV:Body>';
		soapMessage+='</SOAP-ENV:Envelope>';
		/*var user = 'pgselbu';
		var pass = '25690qgs';*/
		var user = 'test';
		var pass = 'test';

		require(
			[
			"dojo",
 			"dojo/request"
 			], function(dojo,request)
  	  		{
				/*
				Pruebas:
			    https://www.user.generali.es/sin_saludServWeb/services/SinSaludHandler
			  Prod
			    https://www.generali.es/sin_saludServWeb/services/SinSaludHandler*/

	         request.get("https://test:test@192.168.8.35/admin",{	
	         	data: soapMessage,         	
              	preventCache: true,	    
              	allowNoTrailingSlash: false     	
					/*withCredentials: true*/					
 				}).then(function(datos){
 					console.log("DATOS XML:"+datos);
 				},
  				function(error)
  				{
 						console.log("Error XML:"+error);
 				});			
		});
	}
}	
);